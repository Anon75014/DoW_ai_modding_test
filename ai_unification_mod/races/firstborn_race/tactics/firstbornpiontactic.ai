----------------------------------------
-- File: 'firstbornpiontactic.ai'
-- Edited by Thudmeizer		@ 20.10.2025

class 'FirstbornPionTactic' (FirstbornVehicleTactic)

FirstbornPion = {}

function FirstbornPionTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Firstborn Pion Heavy Artillery Tactic")
end

function FirstbornPionTactic:InitAbilities()

	-- Init ability ID's
	if (FirstbornPion.taborite_id == nil) then
		FirstbornPion.taborite_id = cpu_manager.stats:GetAbilityID( "firstborn_pion_taborite" )
	end
end

function FirstbornPionTactic:DoAbilities()

	-- Check if I can fire a Taborite Round if we have the health else fire at will
	if (self.squad_ai:WasRecentlyHurt() and self.squad_ai:GetHealthPercentage() < 0.4) then
		Ability.DoAbilityPos(self.squad_ai, FirstbornPion.taborite_id, Ability.Filters.CloseEnemy, 8)
		Ability.DoAbilityPos(self.squad_ai, FirstbornPion.taborite_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1)
	else
		Ability.DoAbilityPos(self.squad_ai, FirstbornPion.taborite_id, Ability.Filters.CloseEnemy, 16)
		Ability.DoAbilityPos(self.squad_ai, FirstbornPion.taborite_id, Ability.EntityFilters.CloseBaseEntityEnemy, 3)
	end

	-- Call standard method
	FirstbornVehicleTactic.DoAbilities(self)
end
