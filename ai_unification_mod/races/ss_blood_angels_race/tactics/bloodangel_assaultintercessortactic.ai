----------------------------------------
-- File: 'bloodangelassaultintercessortactic.ai'
-- Edited by Gambit @ 02.09.2023

class 'BloodAngelAssaultIntercessorTactic' (BloodAngelsInfantryTactic)

BloodAngelAssaultIntercessor = {}

function BloodAngelAssaultIntercessorTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Blood Angel Assault Intercessors Tactic")
end

function BloodAngelAssaultIntercessorTactic:InitAbilities()

	-- Init ability ID's
	if BloodAngelAssaultIntercessor.frag_id == nil then
		BloodAngelAssaultIntercessor.frag_id = cpu_manager.stats:GetAbilityID( "blood_angel_frag_grenades" )
		BloodAngelAssaultIntercessor.krak_id = cpu_manager.stats:GetAbilityID( "blood_angel_krak_grenades" )
	end
end

function BloodAngelAssaultIntercessorTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then
		if self.squad_ai:CanDoAbility(BloodAngelAssaultIntercessor.frag_id) then
			if Ability.DoAbilityTarget(self.squad_ai, BloodAngelAssaultIntercessor.frag_id, Ability.Filters.CloseCommanderEnemy, 1) 
			or Ability.DoAbilityTarget(self.squad_ai, BloodAngelAssaultIntercessor.frag_id, Ability.Filters.CloseSquadEnemy, 4) then
                return
            end
		end
		if self.squad_ai:CanDoAbility(BloodAngelAssaultIntercessor.krak_id) then
			if Ability.DoAbilityTarget(self.squad_ai, BloodAngelAssaultIntercessor.krak_id, Ability.Filters.CloseVehicleEnemy, 1)
			or Ability.DoAbilityTargetEntity(self.squad_ai, BloodAngelAssaultIntercessor.krak_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1) then
				return
			end
		end
	end

	-- Call basic DoAbilities methods
	BloodAngelsInfantryTactic.DoAbilities(self)
end

