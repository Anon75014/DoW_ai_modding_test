----------------------------------------
-- File: 'renegades_heretek_tactic.ai'
-- Edited by Arkhan 		@ 10.01.2007
-- Edited by Thudmeizer 	@ 21.05.2023

class 'Renegades_Heretek_Tactic' (EngineerTactic)

Heretek = {}

function Renegades_Heretek_Tactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Renegade Heretek Tactic")
	
	-- Hereteks are able to enter bunkers
	self.m_iBunkerMoveDelay = 0
end

function Renegades_Heretek_Tactic:InitAbilities()

	-- Init ability ID's
	if (Heretek.sprint_id == nil) then
		Heretek.sprint_id = cpu_manager.stats:GetAbilityID( "renegade_guard_sprint_engineer" )	
	end
end

function Renegades_Heretek_Tactic:DoAbilities()

	-- Check to make sure if no threats are nearby
	if not (self.squad_ai:IsInCombat()) and not (self.squad_ai:IsUnderAttack()) then

		-- If I am safe I can sprint
		if (self.squad_ai:CanDoAbility( Heretek.sprint_id )) then
			self.squad_ai:DoSpecialAbility( Heretek.sprint_id )
		end
	end
end

function Renegades_Heretek_Tactic:Update()

	-- Check bunker move delay
	if (g_iGMT < self.m_iBunkerMoveDelay) then
		return
	end

	-- Update engineer tactic
	EngineerTactic.Update(self)

	-- Check if we're hurt
	if (self.squad_ai:WasRecentlyHurt()) then
	
		-- Try to occupy a close bunker	
		if (cpu_manager:OccupyBunker(self.squad_ai, 35)) then
			self.m_iBunkerMoveDelay = g_iGMT + 5
			return
		end
	end
end
 