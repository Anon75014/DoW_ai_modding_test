----------------------------------------
-- File: 'renegade_guardloader.ai'
-- Edited by Arkhan	@ 23.10.2006
-- Edited by Thudmeizer @ 05.11.2025

class 'renegade_guard_race'

-- Constructor
function renegade_guard_race:__init()

end

-- Returns the name of the race
function renegade_guard_race:GetRaceName()
	return "renegade_guard_race"
end

-- This function is called if renegade guard are the race being played
function renegade_guard_race:LoadRace( eDifficulty )

	-- Import strategies
	import( 'Races/renegade_guard_race/Strategies/Renegade_GuardBuildBaseStrategy.ai' )

	-- Import strategy info
	import( "Races/renegade_guard_race/Strategies/Renegade_GuardStrategyInfo.ai" )

	-- Import tactics
	import( 'Races/renegade_guard_race/Tactics/Renegades_Infantry_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Vehicle_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Heretek_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Warrior_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Warrior_SP_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Beastmen_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Heavy_Weapons_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Archer_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Eradicator_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Kasrkin_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Scion_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Skitarii_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Maiden_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Acheron_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Medic_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Eversor_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Reporter_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Samurai_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Tengu_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Ronin_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Balalaika_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Goldship_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Colonel_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Herrscher_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Boba_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Yorha_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Kaga_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Yae_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Rogue_Psyker_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Heretek_Magos_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Arch_Heretic_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Master_Horde_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Mutant_Overlord_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Chimera_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Chimera_Nihon_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Testudo_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Tsunami_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Damocles_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Basilisk_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Thunderbolt_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Vendetta_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Iron_Venti_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_LemanRuss_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Predator_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_TankAce_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Executioner_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_King_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Stormlord_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_GigaFortress_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Earthshaker_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Turret_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Bunker_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Tactica_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Scanner_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_Psyker_Tower_Tactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_ResearchKtgmTactic.ai' )
	import( 'Races/renegade_guard_race/Tactics/Renegades_HQ_Tactic.ai' )

 	-- GAMBIT: New Method of returning a squad or base Tactic (from the CreateTactic function). Indexes.
	-- Here follows a Global List with all the squad names as indexes, and their Tactics as values
	-- The name of the Global List must be unique for each race.
    	RG_Race_Squad_Tactic =
    	{
        -- Insert here SQUAD_NAME or BASE_NAME and the TACTIC NAME (with the comma at the end!)
        -- If a squad must NOT have a Tactic attached to it AT ALL, use "NONE" (with quotes, case sensitive).
        -- Suggestion: Better put all in alphabetical order (sorted by squad names) for easier reference

        renegade_guard_squad_enginseer = Renegades_Heretek_Tactic,
        renegade_guard_squad_tekarn_engineer = Renegades_Heretek_Tactic,
        renegade_guard_squad_tekarn_engineer_advance_sp = Renegades_Heretek_Tactic,
        renegade_guard_squad_fanatics = Renegades_Warrior_Tactic,
        renegade_guard_squad_tekarn_scout = Renegades_Warrior_Tactic,
        renegade_guard_squad_tekarn = Renegades_Warrior_Tactic,
        renegade_guard_squad_guardsmen_horde = Renegades_Warrior_Tactic,
	renegade_guard_squad_tekarn_sara = Renegades_Warrior_SP_Tactic,
        renegade_guard_squad_tekarn_advance_sp = Renegades_Warrior_SP_Tactic,
	renegade_guard_squad_tekarn_ktgm = Renegades_Warrior_SP_Tactic,
        renegade_guard_squad_beastmen = Renegades_Beastmen_Tactic,
        renegade_guard_squad_heavy_weapons_militia = Renegades_Heavy_Weapons_Tactic,
        renegade_guard_squad_tekarn_archer = Renegades_Archer_Tactic,
        renegade_guard_squad_tekarn_eradicator = Renegades_Eradicator_Tactic,
        renegade_guard_squad_kasrkin = Renegades_Kasrkin_Tactic,
        renegade_guard_squad_kasrkin_advance_sp = Renegades_Kasrkin_Tactic,
        renegade_guard_squad_stormtrooper_tekarn = Renegades_Kasrkin_Tactic,
        renegade_guard_squad_stormtrooper_sp_dxp3_prisoner = Renegades_Kasrkin_Tactic,
        renegade_guard_squad_scion = Renegades_Scion_Tactic,
        renegade_guard_squad_scion_advance_sp = Renegades_Scion_Tactic,
	renegade_guard_squad_tekarn_skitarii = Renegades_Skitarii_Tactic,
        renegade_guard_squad_nihon_actual_maiden_advance_sp = Renegades_Maiden_Tactic,
        renegade_guard_squad_medic = Renegades_Medic_Tactic,
	renegade_guard_squad_tekarn_acheron = Renegades_Acheron_Tactic,
        renegade_guard_squad_tekarn_reporter = Renegades_Reporter_Tactic,
        renegade_guard_squad_eversor = Renegades_Eversor_Tactic,
        renegade_guard_squad_tekarn_samurai = Renegades_Samurai_Tactic,
	renegade_guard_squad_tekarn_kaga = Renegades_Kaga_Tactic,
        renegade_guard_squad_tengu = Renegades_Tengu_Tactic,
	renegade_guard_squad_tekarn_gold_ship = Renegades_Goldship_Tactic, 
        renegade_guard_squad_tekarn_balalaika = Renegades_Balalaika_Tactic,
        renegade_guard_squad_herrscher = Renegades_Herrscher_Tactic,
        renegade_guard_squad_herrscher_advance_sp = Renegades_Herrscher_Tactic,
      	renegade_guard_squad_herrscher_ktgm = Renegades_Herrscher_Tactic,
        renegade_guard_squad_tekarn_colonel = Renegades_Colonel_Tactic,
        renegade_guard_squad_tekarn_boba = Renegades_Boba_Tactic,
        renegade_guard_squad_tekarn_yorha = Renegades_Yorha_Tactic,
        renegade_guard_squad_tekarn_ronin = Renegades_Ronin_Tactic,
        renegade_guard_squad_yae = Renegades_Yae_Tactic,
        renegade_guard_squad_yae_no_seegs = Renegades_Yae_Tactic,
        renegade_guard_squad_psyker_coven = Renegades_Rogue_Psyker_Tactic,
       	renegade_guard_squad_psyker_coven_nolimit = Renegades_Rogue_Psyker_Tactic,
        renegade_guard_squad_heretek_magos = Renegades_Heretek_Magos_Tactic,
        renegade_guard_squad_arch_heretic = Renegades_Arch_Heretic_Tactic,
        renegade_guard_squad_arch_heretic_advance_sp = Renegades_Arch_Heretic_Tactic,
        renegade_guard_squad_master_of_the_horde = Renegades_Master_Horde_Tactic,
        renegade_guard_squad_mutant_overlord = Renegades_Mutant_Overlord_Tactic,
        renegade_guard_squad_mutant_overlord_advance_sp = Renegades_Mutant_Overlord_Tactic,
	renegade_guard_squad_mutant_overlord_survival = Renegades_Mutant_Overlord_Tactic,
	renegade_guard_squad_mutant_overlord_ktgm = Renegades_Mutant_Overlord_Tactic,
        renegade_guard_squad_chimera = Renegades_Chimera_Tactic,
        renegade_guard_squad_tekarn_chimera = Renegades_Chimera_Nihon_Tactic,
        renegade_guard_squad_testudo = Renegades_Testudo_Tactic,
        renegade_guard_squad_tsunami = Renegades_Tsunami_Tactic,
        renegade_guard_squad_tekarn_tarchia = Renegades_Tsunami_Tactic,
        renegade_guard_squad_tekarn_stormrider = Renegades_Tsunami_Tactic,
        renegade_guard_squad_tekarn_damocles = Renegades_Damocles_Tactic,
        renegade_guard_squad_basilisk = Renegades_Basilisk_Tactic,
        renegade_guard_squad_thunderbolt = Renegades_Thunderbolt_Tactic,
        renegade_guard_squad_vendetta = Renegades_Vendetta_Tactic,
        renegade_guard_squad_vendetta_landed = Renegades_Vendetta_Tactic,
	renegade_guard_squad_iron_venti = Renegades_Iron_Venti_Tactic,
        renegade_guard_squad_lemanruss = Renegades_LemanRuss_Tactic,
        renegade_guard_squad_lemanruss_nolimit = Renegades_LemanRuss_Tactic,
	renegade_guard_squad_tekarn_predator = Renegades_Predator_Tactic, 
	renegade_guard_squad_tekarn_tank_ace = Renegades_TankAce_Tactic,
        renegade_guard_squad_tekarn_executioner = Renegades_Executioner_Tactic,
        renegade_guard_squad_tekarn_king_oni = Renegades_King_Tactic,
        renegade_guard_squad_stormlord = Renegades_Stormlord_Tactic,
        renegade_guard_squad_stormlord_nolimit = Renegades_Stormlord_Tactic,
        renegade_guard_squad_giga_fortress = Renegades_GigaFortress_Tactic,
	}

    	RG_Race_Base_Tactic =
	{
	renegade_guard_hq = Renegades_HQ_Tactic,
	renegade_guard_turret_heavy_bolter = Renegades_Turret_Tactic,
	renegade_guard_turret_heavy_bolter_no_limit = Renegades_Turret_Tactic, 
	renegade_guard_infantry = Renegades_Bunker_Tactic,
	renegade_guard_infantry_horde = Renegades_Bunker_Tactic,
	renegade_guard_mechanized = Renegades_Bunker_Tactic,
	renegade_guard_tactica = Renegades_Tactica_Tactic,
	renegade_guard_machine_pit = Renegades_Bunker_Tactic,
	renegade_guard_pulse_scanner = Renegades_Scanner_Tactic,
	renegade_guard_psyker_tower = Renegades_Psyker_Tower_Tactic,
        renegade_guard_research_ktgm = Renegades_ResearchKtgm_Tactic,
	renegade_guard_earthshaker_platform = Renegades_Earthshaker_Tactic,
	}
	return true
end

-- This function is called even if renegade guard are not the race being played
function renegade_guard_race:LoadGlobalInfo()

	-- Import info files
	import( 'Races/renegade_guard_race/Info/renegade_guardunitstats.ai' )

	-- Add guard unit stats
	table.insert(UnitStats, Renegade_GuardUnitStats)
	return true
end

-- Creates build base strategy
function renegade_guard_race:CreateBuildBaseStrategy()
	return Renegade_GuardBuildBaseStrategy(BuildBaseStrategyInfo)
end

-- Creates a special tactic for a marine units
-- GAMBIT: Updated version, with no IFs at all, much faster and reliable. CPU utilization nigh zero
function renegade_guard_race:CreateTactic(oSquadAI)

    	-- Get unit name, and see if there is an attached tactic to it
    	local sUnitName = oSquadAI:GetSquadName()    
	if sUnitName ~= nil and RG_Race_Squad_Tactic[sUnitName] ~= nil then
		if RG_Race_Squad_Tactic[sUnitName] == "NONE" then
            		-- The squad must have NO tactic. Return nil.
            		return nil
        	else
            		return RG_Race_Squad_Tactic[sUnitName](oSquadAI)
        	end
    	end

	-- Get class
	local eClass = oSquadAI:GetStats():GetClass()

	-- Check if there is a special tactic for the unit available
	local bVehicle = (eClass == UnitStatsAI.UC_VehicleLow or eClass == UnitStatsAI.UC_VehicleMed or eClass == UnitStatsAI.UC_VehicleHigh)
	local bAirPlane = (eClass == UnitStatsAI.UC_AirLow or eClass == UnitStatsAI.UC_AirMed or eClass == UnitStatsAI.UC_AirHigh)

	if (bVehicle or bAirPlane) then
		return Renegades_Vehicle_Tactic(oSquadAI)
	end
	return Renegades_Infantry_Tactic(oSquadAI)
end

-- Creates a special tactic for buildings
-- GAMBIT: Updated version, with no IFs at all, much faster and reliable. CPU utilization nigh zero
function renegade_guard_race:CreateBaseTactic(oBuilding)

	-- Get building name
	local sBuildingName = oBuilding:GetBaseName()
	if sBuildingName ~= nil and RG_Race_Base_Tactic[sBuildingName] ~= nil then
		if RG_Race_Base_Tactic[sBuildingName] == "NONE" then
            		-- The building must have NO tactic. Return nil.
            		return nil
        	else
            		return RG_Race_Base_Tactic[sBuildingName](oBuilding)
        	end
    	end
	return nil
end

-- Returns a specific information
function renegade_guard_race:GetInfo(sType)

	-- Check info type
	if (sType == "TurretPower") then
		return 400
	elseif (sType == "SupportAllyFactor") then
		return 8 / 4
	elseif (sType == "AttackModifier") then
		return 10
	elseif (sType == "CriticalRangeIncreasePerTier") then
		return 10
	elseif (sType == "MinArmyStrengthPerTier") then
		return 750
	elseif (sType == "AttackRatio") then
		return 4 / 5
	elseif (sType == "RetreatRatio") then
		return 3 / 5
	elseif (sType == "InvisibleBuildings") then
		return false
	elseif (sType == "HarassingLeader") then
		if cpu_manager.cpu_player:IsResearchComplete("renegade_guard_research_master_of_the_horde") then
			return "renegade_guard_squad_master_of_the_horde"
		elseif cpu_manager.cpu_player:IsResearchComplete("renegade_guard_research_mutant_overlord") then
			return "renegade_guard_squad_mutant_overlord"
		end
	elseif (sType == "AutoConstructBuildings") then
		return false
	end
	return nil
end

-- Returns the building type and threat
function renegade_guard_race:GetBuildingType(sBuildingName)

	-- Return race specific object string
	if (sBuildingName == "renegade_guard_hq") then
		return "HQ", 0

	elseif (sBuildingName == "renegade_guard_plasma_generator") or (sBuildingName == "renegade_guard_plasma_generator_raiden") then
		return "Generator", 0

	elseif (sBuildingName == "renegade_guard_thermo_plasma") or (sBuildingName == "renegade_guard_thermo_plasma_raiden") then
		return "BiggerGenerator", 0

	elseif (sBuildingName == "renegade_guard_mechanized") or (sBuildingName == "renegade_guard_machine_pit") then
		return "VehicleBuilding", 0

	elseif (sBuildingName == "renegade_guard_tactica") then
		return "Armoury", 0

	elseif (sBuildingName == "renegade_guard_listening_post") then
		return "ListeningPost", 0

	elseif (sBuildingName == "renegade_guard_turret_heavy_bolter") then
		return "Turret", 300

	elseif (sBuildingName == "renegade_guard_mines") then
		return "Mine", 100
	end
	return nil, 0
end
