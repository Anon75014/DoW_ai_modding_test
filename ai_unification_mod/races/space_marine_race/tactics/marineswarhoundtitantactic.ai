----------------------------------------
-- File: 'marineswarhoundtitantactic.ai'
-- Edited by Gambit         @ 08.08.2020

class 'MarinesWarHoundTitanTactic' (SpaceMarineVehicleTactic)

MarinesWarHoundTitan = {}

function MarinesWarHoundTitanTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Warhound Titan Tactic")
end


function MarinesWarHoundTitanTactic:InitAbilities()

	-- Init ability ID's
	if MarinesWarHoundTitan.stomp_id == nil then
		MarinesWarHoundTitan.stomp_id = cpu_manager.stats:GetAbilityID( "marines_wh_titan_trample" )
		MarinesWarHoundTitan.push_id = cpu_manager.stats:GetAbilityID( "marines_wh_titan_charge" )
	end
end

function MarinesWarHoundTitanTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then

		if self.squad_ai:CanDoAbility(MarinesWarHoundTitan.stomp_id) and self.squad_ai:IsAttacking() then
			if Ability.DoAbilityTarget(self.squad_ai, MarinesWarHoundTitan.stomp_id, Ability.Filters.CloseSquadEnemy, 5) then
				return
			end
		end

		if self.squad_ai:CanDoAbility(MarinesWarHoundTitan.push_id) and self.squad_ai:IsInStateMove() then
			if Ability.DoAbilityArea(self.squad_ai, MarinesWarHoundTitan.push_id, Ability.Filters.CloseSquadEnemy, 10, 4)
			or Ability.DoAbilityArea(self.squad_ai, MarinesWarHoundTitan.push_id, Ability.Filters.CloseMonsterEnemy, 10, 4) then
				return
			end
		end
	end
	
	-- Do basic abilities
	SpaceMarineVehicleTactic.DoAbilities(self)
end