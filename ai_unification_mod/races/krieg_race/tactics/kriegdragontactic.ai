----------------------------------------
-- File: 'kriegdragontactic.ai'
-- Edited by Thudmeizer @ 23.06.2024

class 'KriegDragonTactic' (KriegVehicleTactic)

KriegDragon = {}

function KriegDragonTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Krieg Dragon Tactic")
end

function KriegDragonTactic:InitAbilities()

	-- Init ability ID's
	if KriegDragon.firestorm_id == nil then
		KriegDragon.firestorm_id = cpu_manager.stats:GetAbilityID( "krieg_dragon_firestorm" )
	end
end

function KriegDragonTactic:DoAbilities()

	-- Try to use Firestorm but if are dying, lower requisites for attacks
	if (self.squad_ai:WasRecentlyHurt() and self.squad_ai:GetHealthPercentage() < 0.4) then
		Ability.DoAbilityTarget(self.squad_ai, KriegDragon.firestorm_id, Ability.Filters.CloseEnemy, 3)
	else
		Ability.DoAbilityTarget(self.squad_ai, KriegDragon.firestorm_id, Ability.Filters.CloseEnemy, 6)
	end

	-- Call standard method
	KriegVehicleTactic.DoAbilities(self)
end
