----------------------------------------
-- File: 'kriegtankturrettactic.ai'
-- Edited by Thudmeizer		@ 31.08.2025

class 'KriegTankTurretTactic' (BaseTactic)

KriegTankTurret = {}

function KriegTankTurretTactic:__init( base_ai ) super( base_ai )

	self:SetName("Krieg Tank Turret Tactic")
end

function KriegTankTurretTactic:AutoBuildAddOn( addonSlot, iID )
	local buildChannelLP = build_manager:GetBuildChannelFromID(iID)
	if (buildChannelLP ~= nil) then
		local addOnID = buildChannelLP:GetItemIDAt(BuildChannelAI.PQ_AddOn, addonSlot)
		if (buildChannelLP:IsBuilding() == 0 and buildChannelLP:CanAddToQueue(BuildChannelAI.PQ_AddOn, addOnID) == BuildChannelAI.CANBUILD_Ok) then
			buildChannelLP:BuildAddOn(addOnID)
		end
	end
end

function KriegTankTurretTactic:DoAbilities()

	-- Available addons
	-- [addon_01] = addons\addon_krieg_turret_plasma
	-- [addon_02] = addons\addon_krieg_bolster
	-- [addon_03] = addons\addon_krieg_turret_gatling


	local iRequisition = resource_manager:GetResourceAmount():Get( ResourceAmount.RT_Requisition )
	local iPower = resource_manager:GetResourceAmount():Get( ResourceAmount.RT_Power )

	if (iRequisition >= 200 and iPower >= 200) then
		local random_turret_addon = math.random( 0,2 )
		self:AutoBuildAddOn(random_turret_addon, self.base_ai:GetEntity():GetID())	-- Select only one of these addons
	end
end

