----------------------------------------
-- File: 'shadowspectretactic.ai'
-- Edited by Gambit		@ 07.02.2021

class 'ShadowSpectreTactic' (EldarInfantryTactic)

ShadowSpectres = {}

function ShadowSpectreTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Shadow Spectres Tactic")
end


function ShadowSpectreTactic:InitAbilities()

	-- Init ability ID's
	if ShadowSpectres.grenades_id == nil then
		ShadowSpectres.grenades_id = cpu_manager.stats:GetAbilityID( "eldar_plasma_grenades_spectres" )
		ShadowSpectres.weapon_mode_id = cpu_manager.stats:GetAbilityID( "eldar_shadow_spectres_prism_rifle_mode" )
	end
end


function ShadowSpectreTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then

		if self.squad_ai:CanDoAbility(ShadowSpectres.grenades_id) then
			Ability.DoAbilityTarget( self.squad_ai, ShadowSpectres.grenades_id, Ability.Filters.CloseSquadEnemy, 1 ) 
		end

		if self.squad_ai:CanDoAbility(ShadowSpectres.weapon_mode_id) then
			if Ability.Filters.CloseVehicleEnemy(self.squad_ai:GetPosition(), 25, 1) ~= nil then
				self.squad_ai:DoSpecialAbility(ShadowSpectres.weapon_mode_id)
			end
		end
	end

	-- Call basic DoAbilities methods
	EldarInfantryTactic.DoAbilities(self)
end

