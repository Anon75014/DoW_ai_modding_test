----------------------------------------
-- File: 'hemlocktactic.ai'
-- Created by Gambit @ 19.09.2017

class 'HemlockTactic' (EldarVehicleTactic)

Hemlock = {}

function HemlockTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Hemlock Wraithfighter Tactic")

	-- Used for the stuck check code for the squads that can jump
	self.initialPosition = self.squad_ai:GetPosition()
end


function HemlockTactic:InitAbilities()

	-- Init ability ID's
	if Hemlock.mindshock_pod_id == nil then
		Hemlock.mindshock_pod_id = cpu_manager.stats:GetAbilityID( "eldar_hemlock_mindshock_pod" )
	end
end


function HemlockTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then
		if self.squad_ai:CanDoAbility(Hemlock.mindshock_pod_id) then
			if Ability.Filters.CloseSquadEnemy(self.squad_ai:GetPosition(), 20, 6) ~= nil then
				self.squad_ai:DoSpecialAbility(Hemlock.mindshock_pod_id)
			end
		end
	end

	-- New code to unstuck units with pathing issues, that can jump.
	-- Call it with [true], only for multi-membered squads.
	self:SolveStuckCase(false)
end
