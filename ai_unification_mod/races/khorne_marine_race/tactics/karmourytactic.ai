----------------------------------------
-- File: 'karmourytactic.ai'
-- Created by I_Chample
-- Edited by Thudmeizer  @ 23.05.2020

class 'karmouryTactic' (BaseTactic)

karmoury = {}

function karmouryTactic:__init( base_ai ) super( base_ai )

	self:SetName("karmoury Tactic")

	self.m_bCanDeepStrikeTroops = true
	self.m_iALTUpgradePath = math.random(0, 3)
end

function karmouryTactic:AutoBuildAddOn( addonSlot )
	for e in self.base_ai:GetEntities() do
		local buildChannelALT = build_manager:GetBuildChannelFromID(e:GetID())
		if (buildChannelALT ~= nil) then
			local addOnID = buildChannelALT:GetItemIDAt(BuildChannelAI.PQ_AddOn, addonSlot)
			if (buildChannelALT:IsBuilding() == 0 and buildChannelALT:CanAddToQueue(BuildChannelAI.PQ_AddOn, addOnID) == BuildChannelAI.CANBUILD_Ok) then			
				buildChannelALT:BuildAddOn(addOnID)
				return
			end
		end
	end
	return
end

function karmouryTactic:Upgrade()

	self:AutoBuildAddOn(2)

	if (self.m_iALTUpgradePath == 0) then
		self:AutoBuildAddOn(0)
	elseif (self.m_iALTUpgradePath == 1) then
		self:AutoBuildAddOn(1)
	elseif (self.m_iALTUpgradePath == 2) then
		self:AutoBuildAddOn(2)
	elseif (self.m_iALTUpgradePath == 3) then
		self:AutoBuildAddOn(3)
	end
end