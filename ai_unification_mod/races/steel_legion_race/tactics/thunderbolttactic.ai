----------------------------------------
-- File: 'thunderbolttactic.ai'
-- Edited by Thudmeizer         @ 16.10.2023

class 'ThunderboltTactic' (SteelLegionVehicleTactic)

Thunderbolt = {}

function ThunderboltTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Steel Legions Thunderbolt Tactic")
end

function ThunderboltTactic:InitAbilities()

	-- Init ability ID's
	if (Thunderbolt.chaffs_id == nil) then
		Thunderbolt.chaffs_id = cpu_manager.stats:GetAbilityID( "steel_legion_thunderbolt_chaffs" )
	end
end

function ThunderboltTactic:DoAbilities()

	-- Check if I can use countermeasure chaffs while stationary
	if (self.squad_ai:WasRecentlyHurt() and not self.squad_ai:IsInStateMove() and not self.squad_ai:IsInStateAttackMove()) then
		
		if (self.squad_ai:CanDoAbility(Thunderbolt.chaffs_id)) then
			self.squad_ai:DoSpecialAbility(Thunderbolt.chaffs_id)
		end	  
	end

	-- New code to unstuck units with pathing issues, that can jump.
	-- Call it with [true], only for multi-membered squads.
	self:SolveStuckCase(false)
	
	-- Do basic abilities
	SteelLegionVehicleTactic.DoAbilities(self)
end