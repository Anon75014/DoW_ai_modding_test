----------------------------------------
-- File: 'testudotactic.ai'
-- Edited by Arkhan	@ 23.11.2007
-- Edited by Thudmeizer @ 28.11.2024

class 'TestudoTactic' (GuardVehicleTactic)

Testudo = {}

function TestudoTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Testudo Tactic")

	-- Vehicle is a light transport
	self.m_iTransportVehicle = 1
	self.m_iTransportSlots = 2
	self.lastAddonTry = g_iGMT
end

function TestudoTactic:AutoBuildAddOn( addonSlot )
	for e in self.squad_ai:GetEntities() do
		local buildChannel = build_manager:GetBuildChannelFromID(e:GetID())
		if buildChannel ~= nil then
			local addOnID = buildChannel:GetItemIDAt(BuildChannelAI.PQ_AddOn, addonSlot)
			if (buildChannel:IsBuilding() == 0 and buildChannel:CanAddToQueue(BuildChannelAI.PQ_AddOn, addOnID) == BuildChannelAI.CANBUILD_Ok) then
				buildChannel:BuildAddOn(addOnID)
				return
			end
		end
	end
	return
end

function TestudoTactic:DoAbilities()

	-- Check to build an addon every 10+ secs
	if g_iGMT > self.lastAddonTry + 10 then
		self.lastAddonTry = g_iGMT
		self:AutoBuildAddOn(0)
	end
end
