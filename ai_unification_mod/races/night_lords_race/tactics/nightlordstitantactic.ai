----------------------------------------
-- File: 'nightlordstitantactic.ai'
-- Edited by Thudmeizer		@ 02.07.2024

class 'NightLordsTitanTactic' (NightLordsVehicleTactic)

NightLordsTitan = {}

function NightLordsTitanTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("NightLords Titan Tactic")
end

function NightLordsTitanTactic:InitAbilities()

	-- Init ability ID's
	if NightLordsTitan.turret_id == nil then
		NightLordsTitan.turret_id = cpu_manager.stats:GetAbilityID("night_lords_reaver_titan_charge")
	end
end

function NightLordsTitanTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then

		if self.squad_ai:CanDoAbility(NightLordsTitan.turret_id) and self.squad_ai:IsInStateMove() then
			if Ability.DoAbilityArea(self.squad_ai, NightLordsTitan.turret_id, Ability.Filters.CloseSquadEnemy, 10, 4)
			or Ability.DoAbilityArea(self.squad_ai, NightLordsTitan.turret_id, Ability.Filters.CloseMonsterEnemy, 10, 4) then
				return
			end
		end
	end
end

function NightLordsTitanTactic:Upgrade()

	-- Do best upgrade
	local class_type = cpu_manager:FindClosestEnemyPlayer():GetMajorityClassType()
	self.squad_ai:DoBestUpgrade( class_type )
end

