----------------------------------------
-- File: 'enclavessentineltactic.ai'
-- Edited by Thudmeizer		@ 07.09.2023

class 'EnclavesSentinelTactic' (EnclavesVehicleTactic)

EnclavesSentinel = {}

function EnclavesSentinelTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Enclaves Sentinel Tactic")
end

function EnclavesSentinelTactic:CanOnlyDecap()
	return true
end

function EnclavesSentinelTactic:InitAbilities()

	-- Init ability ID's
	if (EnclavesSentinel.stealth_id == nil) then
		EnclavesSentinel.stealth_id = cpu_manager.stats:GetAbilityID( "enclaves_sentinel_stealth" )	
	end
end

function EnclavesSentinelTactic:DoAbilities()

	-- Check to make sure if threats are nearby
	if self.squad_ai:IsInCombat() then

		-- If I can infiltrate when enemies are close
		local iPos = self.squad_ai:GetPosition()
		local oTarget = Ability.Filters.CloseEnemy(iPos, 10, 1)
		if oTarget ~= nil and oTarget:IsValid() then
			if (self.squad_ai:CanDoAbility( EnclavesSentinel.stealth_id )) then
				self.squad_ai:DoSpecialAbility( EnclavesSentinel.stealth_id )
			end
		end
	end
end
