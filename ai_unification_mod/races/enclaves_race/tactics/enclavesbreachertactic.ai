----------------------------------------
-- File: 'enclavesbreachertactic.ai'
-- Edited by Thudmeizer			@ 26.02.2024

class 'EnclavesBreacherTactic' (EnclavesInfantryTactic)

EnclavesBreacher = {}

function EnclavesBreacherTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Enclaves Breacher Squad Tactic")
end

function EnclavesBreacherTactic:InitAbilities()
--[[
	if (EnclavesBreacher.shockwave_id == nil) then
		EnclavesBreacher.shockwave_id = cpu_manager.stats:GetAbilityID( "enclaves_antigrav_shockwave" )	
	end
]]
end

function EnclavesBreacherTactic:DoAbilities()
--[[
	-- We are dying, lower requisites for attacks
	if (self.squad_ai:WasRecentlyHurt() and self.squad_ai:GetHealthPercentage() < 0.4) then
 		Ability.DoAbilityArea( self.squad_ai, EnclavesBreacher.shockwave_id, Ability.Filters.CloseEnemy, 2 )
	else
 		Ability.DoAbilityArea( self.squad_ai, EnclavesBreacher.shockwave_id, Ability.Filters.CloseEnemy, 6 )
	end
]]	
	-- Call basic DoAbilities methods
	InfantryTactic.DoAbilities(self)
end

function EnclavesBreacherTactic:Reinforce()

	if not self.squad_ai:IsReinforcing() then

		-- try for different types of squad members
		local SergeantIndex = 0
		local GravIndex = 1
	
		-- Get current leader count
		local numSergeant = self.squad_ai:GetLeaderCount( SergeantIndex )
		local numGrav = self.squad_ai:GetLeaderCount( GravIndex )

		-- Desired number of each leader type
		local desiredSergeant = math.random(0,1)
		local desiredGrav = math.random(0,1)

		-- Desired order of reinforcing
		if numSergeant < desiredSergeant then
			if self.squad_ai:CanReinforce( true, SergeantIndex ) then
				self.squad_ai:DoReinforce( true, SergeantIndex )
			end

		elseif numGrav < desiredGrav then
			if self.squad_ai:CanReinforce( true, GravIndex ) then
				self.squad_ai:DoReinforce( true, GravIndex )
			end
		end
	end
end