----------------------------------------
-- File: 'longstriketactic.ai'
-- Edited by Gambit         @ 12.8.2021

class 'LongstrikeTactic' (TauVehicleTactic)

LongStrike = {}

function LongstrikeTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Commander Longstrike")
end


function LongstrikeTactic:InitAbilities()
	-- Init ability ID's
	if LongStrike.overcharge_id == nil then
		LongStrike.overcharge_id = cpu_manager.stats:GetAbilityID( "tau_longstrike_overcharge_ion_cannon" )
	end
end


function LongstrikeTactic:DoAbilities()
	if self.squad_ai:IsInCombat() and self.squad_ai:IsAttacking() then
		if self.squad_ai:CanDoAbility(LongStrike.overcharge_id) and not self.squad_ai:IsInStateMove() then
			if not self.squad_ai:WasRecentlyHurt() and self.squad_ai:GetHealthPercentage() > 0.75 then
				if resource_manager:GetResourceAmount():Get(ResourceAmount.RT_Power) > 150 then
					self.squad_ai:DoSpecialAbility(LongStrike.overcharge_id)
				end
			end
		end
	end

	-- New code to unstuck units with pathing issues, that can jump.
	-- Call it with [true], only for multi-membered squads.
	self:SolveStuckCase(false)
end