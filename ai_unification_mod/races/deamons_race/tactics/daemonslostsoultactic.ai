----------------------------------------
-- File: 'LostSoultactic.ai'
-- Edited by fuggles 27.05.2013
-- Edited by corncobman 12.06.2013
-- Edited by Thudmeizer	@ 10.03.2023

class 'DaemonsLostSoulTactic' (EngineerTactic)

LostSoul = {}

function DaemonsLostSoulTactic:__init( squad_ai ) super( squad_ai )
	self:SetName("LostSoul Tactic")
end

function DaemonsLostSoulTactic:IsSupportDetector()
	return true
end

function DaemonsLostSoulTactic:IsEngineerWhoCanCapture()
	return false
end

function DaemonsLostSoulTactic:IsAffectedByMorale()
	return false
end

function DaemonsLostSoulTactic:CanOnlyDecap()
	return true
end

-- Should only attack when attached
function DaemonsLostSoulTactic:IsAttacker()
	return false
end

-- Should only defend when attached
function DaemonsLostSoulTactic:IsDefender()
	return false
end

function DaemonsLostSoulTactic:InitAbilities()

	-- Init ability ID's
	if (LostSoul.shift == nil) then
		LostSoul.shift = cpu_manager.stats:GetAbilityID( "daemons_lost_soul_plane_shift" )
	end
end

function DaemonsLostSoulTactic:DoAbilities()

	Ability.DoAbilityArea(self.squad_ai, LostSoul.shift, Ability.Filters.CloseInCombat, 10, 1)

	InfantryTactic.DoAbilities(self)
end

function DaemonsLostSoulTactic:Update()

	if self:IsComplete() then
      		return
   	end
   
	--state machine
	if not InfantryTactic.Update( self ) then
		return
	end
	
	-- Check if we are in serious trouble
	self:EmergencyRetreat()
end
