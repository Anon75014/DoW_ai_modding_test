----------------------------------------
-- File: 'RavenGuardMarinesWarHoundtitantactic.ai'
-- Edited by Gambit         @ 08.08.2020
-- Edited by Gambit         @ 21.03.2023

class 'RavenGuardMarinesWarHoundTitanTactic' (RavenGuardSpaceMarineVehicleTactic)

RavenGuardMarinesWarHoundTitan = {}

function RavenGuardMarinesWarHoundTitanTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Raven Guard Warhound Titan Tactic")
end

function RavenGuardMarinesWarHoundTitanTactic:InitAbilities()

	-- Init ability ID's
	if RavenGuardMarinesWarHoundTitan.stomp_id == nil then
		RavenGuardMarinesWarHoundTitan.stomp_id = cpu_manager.stats:GetAbilityID( "raven_guard_wh_titan_trample" )
		RavenGuardMarinesWarHoundTitan.push_id = cpu_manager.stats:GetAbilityID( "raven_guard_wh_titan_charge" )
	end
end

function RavenGuardMarinesWarHoundTitanTactic:DoAbilities()

	if self.squad_ai:IsInCombat() then

		if self.squad_ai:CanDoAbility(RavenGuardMarinesWarHoundTitan.stomp_id) and self.squad_ai:IsAttacking() then
			if Ability.DoAbilityTarget(self.squad_ai, RavenGuardMarinesWarHoundTitan.stomp_id, Ability.Filters.CloseSquadEnemy, 5) then
				return
			end
		end

		if self.squad_ai:CanDoAbility(RavenGuardMarinesWarHoundTitan.push_id) and self.squad_ai:IsInStateMove() then
			if Ability.DoAbilityArea(self.squad_ai, RavenGuardMarinesWarHoundTitan.push_id, Ability.Filters.CloseSquadEnemy, 10, 4)
			or Ability.DoAbilityArea(self.squad_ai, RavenGuardMarinesWarHoundTitan.push_id, Ability.Filters.CloseMonsterEnemy, 10, 4) then
				return
			end
		end
	end
	
	-- Do basic abilities
	RavenGuardSpaceMarineVehicleTactic.DoAbilities(self)
end