----------------------------------------
-- File: 'stormhawktactic.ai'
-- Edited by Gambit		@ 14.09.2021

class 'StormhawkTactic' (DaemonhuntVehicleTactic)

StormHawk = {}

function StormhawkTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Stormhawk Interceptor Tactic")

	-- Used for the stuck check code for the squads that can jump
	self.initialPosition = self.squad_ai:GetPosition()
end

function StormhawkTactic:InitAbilities()

	-- Init ability ID's
	if StormHawk.missiles_id == nil then
		StormHawk.missiles_id = cpu_manager.stats:GetAbilityID( "inquisition_stormhawk_missiles" )
	end
end

function StormhawkTactic:DoAbilities()

	local pos = self.squad_ai:GetPosition()
	local use_frag = (Ability.Filters.CloseSquadEnemy(pos, 40, 1) ~= nil or Ability.Filters.CloseMonsterEnemy(pos, 40, 1) ~= nil)
	if self.squad_ai:IsUsingAbility(StormHawk.missiles_id) then
		if use_frag then
			self.squad_ai:DoSpecialAbility(StormHawk.missiles_id)
		end
	elseif not use_frag then
		self.squad_ai:DoSpecialAbility(StormHawk.missiles_id)
	end
	
	-- New code to unstuck units with pathing issues, that can jump.
	-- Call it with [true], only for multi-membered squads.
	self:SolveStuckCase(false)
end