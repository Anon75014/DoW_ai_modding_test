----------------------------------------
-- File: 'bunkertactic.ai'
-- Created by Gambit  @ 19.07.2020

class 'BunkerTactic' (BaseTactic)

function BunkerTactic:__init( base_ai ) super( base_ai )
	self:SetName("Hammerfall bunker Tactic")
end

HammerfallBunker = {}

function BunkerTactic:InitAbilities()
	if (HammerfallBunker.missiles_id == nil) then
		HammerfallBunker.missiles_id = cpu_manager.stats:GetAbilityID( "imperial_fists_bunker_supermissile_swap" )
	end
end


function BunkerTactic:DoAbilities()
	local pos = self.base_ai:GetPosition()
	local use_frag = (Ability.Filters.CloseSquadEnemy(pos, 50, 1) ~= nil or Ability.Filters.CloseMonsterEnemy(pos, 50, 1) ~= nil)
	if self.base_ai:IsUsingAbility(HammerfallBunker.missiles_id) then
		if use_frag then
			self.base_ai:DoSpecialAbility(HammerfallBunker.missiles_id)
		end
	elseif not use_frag then
		self.base_ai:DoSpecialAbility(HammerfallBunker.missiles_id)
	end
end
