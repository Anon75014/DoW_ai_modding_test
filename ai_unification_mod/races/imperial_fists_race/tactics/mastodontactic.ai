----------------------------------------
-- File: 'MastodonTactic.ai'
-- Edited by Thudmeizer		@ 17.03.2018

class 'MastodonTactic' (ImperialFistsVehicleTactic)

Mastodon = {}

function MastodonTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Imperial Fists Mastodon Tactic")
end

function MastodonTactic:InitAbilities()

	-- Init ability ID's
	if (Mastodon.shield_id == nil) then
		Mastodon.shield_id = cpu_manager.stats:GetAbilityID( "imperial_fists_mastodon_shield" )	
	end

	if (Mastodon.missile_id == nil) then
		Mastodon.missile_id = cpu_manager.stats:GetAbilityID( "imperial_fists_hk_missiles_mastodon" )
	end

	if (Mastodon.melta_id == nil) then
		Mastodon.melta_id = cpu_manager.stats:GetAbilityID( "imperial_fists_melta_mastodon" )
	end
end

function MastodonTactic:DoAbilities()


	if (self.squad_ai:IsAttacking() and self.squad_ai:CanDoAbility(Mastodon.missile_id)) then
		Ability.DoAbilityTarget( self.squad_ai, Mastodon.missile_id, Ability.Filters.CloseVehicleEnemy, 1 )
		Ability.DoAbilityTargetEntity( self.squad_ai, Mastodon.missile_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1 )
	end

	if (self.squad_ai:IsAttacking() and self.squad_ai:CanDoAbility(Mastodon.melta_id)) then
		Ability.DoAbilityTarget( self.squad_ai, Mastodon.melta_id, Ability.Filters.CloseVehicleEnemy, 1 )
		Ability.DoAbilityTargetEntity( self.squad_ai, Mastodon.melta_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1 )
		Ability.DoAbilityTarget( self.squad_ai, Mastodon.melta_id, Ability.Filters.CloseSquadEnemy, 4 )
	end

	-- Call standard method
	Ability.DoAbility( self.squad_ai,Mastodon.shield_id, Ability.Filters.IsInCombat )
	ImperialFistsVehicleTactic.DoAbilities(self)
end


