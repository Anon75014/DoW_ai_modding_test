----------------------------------------
-- File: 'greatwaaghbannertactic.ai'
-- Edited by Thudmeizer		@ 02.10.2023

class 'GreatWaaghBannerTactic' (BaseTactic)

GreatWaaghBanner = {}

function GreatWaaghBannerTactic:__init( base_ai ) super( base_ai )

	self:SetName("Great Waagh Banner Tactic")

	self.GunzAddon = math.random( 0,1 )
end

function GreatWaaghBannerTactic:AutoBuildTurretAddOn( addonSlot, iID )
	local buildChannelLP = build_manager:GetBuildChannelFromID(iID)
	if (buildChannelLP ~= nil) then
		local addOnID = buildChannelLP:GetItemIDAt(BuildChannelAI.PQ_AddOn, addonSlot)
		if (buildChannelLP:IsBuilding() == 0 and buildChannelLP:CanAddToQueue(BuildChannelAI.PQ_AddOn, addOnID) == BuildChannelAI.CANBUILD_Ok) then
			buildChannelLP:BuildAddOn(addOnID)
		end
	end
end

function GreatWaaghBannerTactic:DoAbilities()

	if self.GunzAddon == 0 then
		-- Choose only the shoota upgrade
		self:AutoBuildTurretAddOn(0, self.base_ai:GetEntity():GetID())	
	elseif self.GunzAddon == 1 then
		-- Choose the shoota then the missile upgrade
		self:AutoBuildTurretAddOn(0, self.base_ai:GetEntity():GetID())
		self:AutoBuildTurretAddOn(1, self.base_ai:GetEntity():GetID())
	end
end