----------------------------------------
-- File: 'deathwingterminatortactic.ai'
-- Edited by Thudmeizer @ 06.06.2018

class 'DarkAngelsDeathwingTerminatorTactic' (DarkAngelsInfantryTactic)

DarkAngelsDeathwingTerminator = {}

function DarkAngelsDeathwingTerminatorTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Dark Angels Deathwing Terminator Tactic")
end

function DarkAngelsDeathwingTerminatorTactic:Reinforce()

  --always try for the actual leader first
	if not self.squad_ai:IsReinforcing() then
		if self.squad_ai:CanReinforce( false, 0 ) then
		   self.squad_ai:DoReinforce( false, 0 )
		end
	end

	if not self.squad_ai:IsReinforcing() then

		-- try for different types of squad members
		local cannonIndex = 0
		local clawIndex = 1
		local hammerIndex = 2
		local missileIndex = 3
	
		local numCannons = self.squad_ai:GetLeaderCount( cannonIndex )
		local numClaws = self.squad_ai:GetLeaderCount( clawIndex )
		local numHammers = self.squad_ai:GetLeaderCount( hammerIndex )
		local numMissiles = self.squad_ai:GetLeaderCount( missileIndex )

		-- Desired number of each leader type
		local desiredCannons = 1 
		local desiredClaws = 1
		local desiredHammers = 1
		local desiredMissiles = 2

		-- Desired order of reinforcing
		if numCannons < desiredCannons then
			if self.squad_ai:CanReinforce( true, cannonIndex ) then
				self.squad_ai:DoReinforce( true, cannonIndex )
			end

		elseif numClaws < desiredClaws then
			if self.squad_ai:CanReinforce( true, clawIndex ) then
				self.squad_ai:DoReinforce( true, clawIndex )
			end

		elseif numHammers < desiredHammers then
			if self.squad_ai:CanReinforce( true, hammerIndex ) then
				self.squad_ai:DoReinforce( true, hammerIndex )
			end

		elseif numMissiles < desiredMissiles then
			if self.squad_ai:CanReinforce( true, missileIndex ) then
				self.squad_ai:DoReinforce( true, missileIndex )
			end
		end
	end
end