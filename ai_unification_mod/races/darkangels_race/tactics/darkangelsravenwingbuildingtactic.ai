----------------------------------------
-- File: 'darkangelsravenwingbuildingtactic.ai'
-- Edited by Thudmeizer		@ 08.09.2008
-- Edited by Gambit		@ 02.10.2016

class 'DarkAngelsRavenwingBuildingTactic' (BaseTactic)

function DarkAngelsRavenwingBuildingTactic:__init( base_ai ) super( base_ai )

	self:SetName("Dark Angels Ravenwing Building Tactic")

	-- Building can deepstrike troops, these are used for the updated code
	self.timeDelay = g_iGMT
	self.buildingDS_ID = self.base_ai:GetID()

	-- Trick to change squad limits, favouring branch squads
	IsRWorDWBranchChosen = true
end

function DarkAngelsRavenwingBuildingTactic:DoAbilities()
	-- Trick to change squad limits, favouring branch squads
	IsRWorDWBranchChosen = true
end

-- Updated method to disallow crowding, around DS-capable buildings
-- Works OK, but the squads' tactics are not updated, so they persist on entering a "filled" building..
function DarkAngelsRavenwingBuildingTactic:CanDeepStrikeTroops()
	local build_channel = build_manager:GetBuildChannelFromID(self.buildingDS_ID)
	if build_channel ~= nil then
		if build_channel:CanDeepStrike() and g_iGMT > self.timeDelay + 6 then
			return false
		else
			self.timeDelay = g_iGMT
			return true
		end
	end
end