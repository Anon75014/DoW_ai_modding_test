----------------------------------------
-- File: 'sistersjunitheruitatactic.ai'
-- Edited by Gambit	@ 27.06.2021
-- Edited by Thudmeizer @ 30.09.2023

class 'SistersJunithEruitaTactic' (SistersVehicleTactic)

JunithEruita = {}

function SistersJunithEruitaTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Sisters Canoness Junith Eruita Tactic")
end

-- Assassinate win condition -- never attack
function SistersJunithEruitaTactic:IsAttacker()
	return (not cpu_manager.assassinate and self:IsCommanderAttacker())
end

-- Assassinate win condition -- never defend
function SistersJunithEruitaTactic:IsDefender()
	return (not cpu_manager.assassinate and self:IsCommanderDefender())
end

function SistersJunithEruitaTactic:InitAbilities()

	-- Init ability ID's
	if JunithEruita.rosarius_id == nil then
		JunithEruita.rosarius_id = cpu_manager.stats:GetAbilityID( "sisters_junith_rosarius" )
	end
end

function SistersJunithEruitaTactic:DoAbilities()
	if self.squad_ai:IsInCombat() and self.squad_ai:WasRecentlyHurt() then
		if self.squad_ai:CanDoAbility(JunithEruita.rosarius_id) then
			self.squad_ai:DoSpecialAbility(JunithEruita.rosarius_id)
		end
	end

	-- New code to unstuck units with pathing issues, that can jump.
	-- Call it with [true], only for multi-membered squads.
	self:SolveStuckCase(false)
end

