----------------------------------------
-- File: 'salamandervenatortactic.ai'
-- Edited by fuggles		@ 17/12/2023

class 'SalamanderVenatorTactic' (SalamanderVehicleTactic)

SalamanderVenator = {}

function SalamanderVenatorTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Salamander Venator Tactic")
end

function SalamanderVenatorTactic:InitAbilities()

	-- Init ability ID's
	if (SalamanderVenator.hk_missile_id == nil) then
		SalamanderVenator.hk_missile_id = cpu_manager.stats:GetAbilityID( "salamander_hk_missile_sicaran" )
		SalamanderVenator.spirit_id = cpu_manager.stats:GetAbilityID( "salamander_machine_spirit_sicaran" )	
	end
end

function SalamanderVenatorTactic:DoAbilities()

	-- Check if I can use machine spirit while stationary
	if (self.squad_ai:WasRecentlyHurt() and not self.squad_ai:IsInStateMove() and not self.squad_ai:IsInStateAttackMove()) then
		
		if (self.squad_ai:CanDoAbility(SalamanderVenator.spirit_id)) then
			self.squad_ai:DoSpecialAbility(SalamanderVenator.spirit_id)
		end	  
	end

	-- Check if we can launch KH Missiles
	if (self.squad_ai:IsAttacking() and self.squad_ai:CanDoAbility(SalamanderVenator.hk_missile_id)) then
		if Ability.DoAbilityTarget( self.squad_ai, SalamanderVenator.hk_missile_id, Ability.Filters.CloseVehicleEnemy, 1 ) or
		Ability.DoAbilityTargetEntity( self.squad_ai, SalamanderVenator.hk_missile_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1 ) or
		Ability.DoAbilityTarget( self.squad_ai, SalamanderVenator.hk_missile_id, Ability.Filters.CloseSquadEnemy, 4 ) then end
	end

	-- Call standard method
	SalamanderVehicleTactic.DoAbilities(self)
end


