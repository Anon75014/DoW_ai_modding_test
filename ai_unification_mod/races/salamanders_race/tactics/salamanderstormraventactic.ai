----------------------------------------
-- File: 'salamanderstormraventactic.ai'
-- Edited by Gambit @ 21.02.2015

class 'SalamanderStormravenTactic' (SalamanderVehicleTactic)

function SalamanderStormravenTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Salamander Stormraven Tactic")

	--self.m_iLastEntrenchTimeSR_BA = g_iGMT
end

function SalamanderStormravenTactic:DoAbilities()

	-- Try to entrench
	self:DoEntrenchAbility()
end

function SalamanderStormravenTactic:DoEntrenchAbility()

	if self.squad_ai:CanUnload() then
		self.squad_ai:DoUnload()
	end

	--[[ Don't entrench/retrench too fast after a retrench/entrench
	if (g_iGMT < self.m_iLastEntrenchTimeSR_BA + 30) then
		return
	end

	-- Check if we can entrench, and there is a need to
	if not self.squad_ai:IsInCombat() then
		if (self.squad_ai:CanEntrench(true)) and (not cpu_manager.terrain_analyzer:HasThreat(self.target, 30)) then
			self.squad_ai:DoEntrench(true)
			self.m_iLastEntrenchTimeSR_BA = g_iGMT
		end
	end]]

	-- Check if we must retrench
	if (self.squad_ai:CanEntrench(false)) then
		self.squad_ai:DoEntrench(false)
	end
end