----------------------------------------
-- File: 'salamandersicarantactic.ai'
-- Edited by Gambit		@ 23.11.2007

class 'SalamanderSicaranTactic' (SalamanderVehicleTactic)

SalamanderSicaran = {}

function SalamanderSicaranTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Salamander Sicaran Tactic")
end

function SalamanderSicaranTactic:InitAbilities()

	-- Init ability ID's
	if (SalamanderSicaran.hk_missile_id == nil) then
		SalamanderSicaran.hk_missile_id = cpu_manager.stats:GetAbilityID( "salamander_hk_missile_sicaran" )
		SalamanderSicaran.spirit_id = cpu_manager.stats:GetAbilityID( "salamander_machine_spirit_sicaran" )	
	end
end

function SalamanderSicaranTactic:DoAbilities()

	-- Check if I can use machine spirit while stationary
	if (self.squad_ai:WasRecentlyHurt() and not self.squad_ai:IsInStateMove() and not self.squad_ai:IsInStateAttackMove()) then
		
		if (self.squad_ai:CanDoAbility(SalamanderSicaran.spirit_id)) then
			self.squad_ai:DoSpecialAbility(SalamanderSicaran.spirit_id)
		end	  
	end

	-- Check if we can launch KH Missiles
	if (self.squad_ai:IsAttacking() and self.squad_ai:CanDoAbility(SalamanderSicaran.hk_missile_id)) then
		if Ability.DoAbilityTarget( self.squad_ai, SalamanderSicaran.hk_missile_id, Ability.Filters.CloseVehicleEnemy, 1 ) or
		Ability.DoAbilityTargetEntity( self.squad_ai, SalamanderSicaran.hk_missile_id, Ability.EntityFilters.CloseBaseEntityEnemy, 1 ) or
		Ability.DoAbilityTarget( self.squad_ai, SalamanderSicaran.hk_missile_id, Ability.Filters.CloseSquadEnemy, 4 ) then end
	end

	-- Call standard method
	SalamanderVehicleTactic.DoAbilities(self)
end


