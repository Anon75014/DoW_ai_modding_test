----------------------------------------
-- File: 'salamanderdeathwatchveterantactic.ai'
-- Edited by Gambit 	@ 29.08.2019
-- Edited by Thudmeizer	@ 30.09.2019

class 'SalamanderDeathwatchVeteranTactic' (SalamanderInfantryTactic)

SalamanderDeathwatchVeteran = {}

function SalamanderDeathwatchVeteranTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Salamander Deathwatch Veteran Tactic")
end

function SalamanderDeathwatchVeteranTactic:InitAbilities()

	-- Init ability ID's
	if (SalamanderDeathwatchVeteran.rain_fire == nil) then
		SalamanderDeathwatchVeteran.rain_fire = cpu_manager.stats:GetAbilityID( "salamander_deathwatch_rain_fire" )
	end

	if (SalamanderDeathwatchVeteran.melta_bombs == nil) then
		SalamanderDeathwatchVeteran.melta_bombs = cpu_manager.stats:GetAbilityID( "salamander_melta_bombs" )
	end
end

function SalamanderDeathwatchVeteranTactic:DoAbilities()

	-- Use Melta Bomb on enemy vehicle
	Ability.DoAbilityTarget( self.squad_ai, SalamanderDeathwatchVeteran.melta_bombs, Ability.Filters.CloseVehicleEnemy, 1 )

	-- Try to use Rain Fire
	-- We are dying, lower requisites for attacks
	if (self.squad_ai:WasRecentlyHurt() and self.squad_ai:GetHealthPercentage() < 0.4) then
		Ability.DoAbilityPos(self.squad_ai, SalamanderDeathwatchVeteran.rain_fire, Ability.Filters.CloseInfantryEnemy, 8)
	else
		Ability.DoAbilityPos(self.squad_ai, SalamanderDeathwatchVeteran.rain_fire, Ability.Filters.CloseInfantryEnemy, 16)
	end
end
